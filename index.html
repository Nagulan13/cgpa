<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGPA and GPA Calculator</title>
</head>
<body>

<h2>Maximum and Minimum CGPA/GPA Calculator for UTHM</h2>

<form method="post" action="">
    <label>Number of Courses: </label>
    <input type="number" name="num_courses" min="1" required><br>

    <?php
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        $numCourses = $_POST["num_courses"];

        echo '<h3>Enter Course Details:</h3>';
        for ($i = 1; $i <= $numCourses; $i++) {
            echo '<label>Course ' . $i . ' Name: </label>';
            echo '<input type="text" name="course_name[' . $i . ']" required><br>';

            echo '<label>Credit Hours for Course ' . $i . ': </label>';
            echo '<input type="number" name="credit_hours[' . $i . ']" min="1" required><br>';

            echo '<label>Desired Grade for Course ' . $i . ': </label>';
            echo '<input type="text" name="desired_grade[' . $i . ']" pattern="A\+?|A-?|B\+?|B-?|C\+?|C-?|D|E" title="Enter a valid grade (A, A+, A-, ..., E)" required><br><br>';
        }

        echo '<input type="submit" value="Calculate Maximum and Minimum CGPA/GPA">';
    }
    ?>
</form>

<?php
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $numCourses = $_POST["num_courses"];
    $totalMaxGradePoints = 0;
    $totalMinGradePoints = 0;
    $totalCreditHours = 0;

    for ($i = 1; $i <= $numCourses; $i++) {
        $creditHours = $_POST["credit_hours"][$i];
        $desiredGrade = $_POST["desired_grade"][$i];

        $maxCreditPoints = getCreditPoints($desiredGrade . '+');
        $minCreditPoints = getCreditPoints($desiredGrade);

        $maxGradePoints = $creditHours * $maxCreditPoints;
        $minGradePoints = $creditHours * $minCreditPoints;

        $totalMaxGradePoints += $maxGradePoints;
        $totalMinGradePoints += $minGradePoints;
        $totalCreditHours += $creditHours;
    }

    $maxCGPA = ($totalMaxGradePoints / $totalCreditHours);
    $minCGPA = ($totalMinGradePoints / $totalCreditHours);
    $maxGPA = $maxCGPA;
    $minGPA = $minCGPA;

    echo '<h3>Results:</h3>';
    echo '<p>Maximum CGPA: ' . number_format($maxCGPA, 2) . '</p>';
    echo '<p>Minimum CGPA: ' . number_format($minCGPA, 2) . '</p>';
    echo '<p>Maximum GPA: ' . number_format($maxGPA, 2) . '</p>';
    echo '<p>Minimum GPA: ' . number_format($minGPA, 2) . '</p>';
}

function getCreditPoints($grade) {
    // Define the grading scale for UTHM
    $gradingScale = [
        'A+' => 4.0,
        'A' => 4.0,
        'A-' => 3.94,
        'B+' => 3.62,
        'B' => 3.24,
        'B-' => 2.94,
        'C+' => 2.62,
        'C' => 2.24,
        'C-' => 1.90,
        'D' => 1.40,
        'E' => 0.0
    ];

    return $gradingScale[$grade];
}
?>

</body>
</html>
